import{a as ce}from"./chunk-U7X24J67.js";import{a as y,b as le,c as se,d as me}from"./chunk-JTJCWOKD.js";import{I as C,J as W,K as U,M as X,N as q,P as Z,Q as z,S as G,T as K,V as ee,X as te,Y as ie,ba as ne,ea as oe,fa as ae,ha as re,j as Q,ka as de,l as J}from"./chunk-KYDS64YB.js";import{a as H,b as N}from"./chunk-724LR74Q.js";import{a as j}from"./chunk-IB4YU7GS.js";import{Sa as k,Ta as B,h as L,i as Y}from"./chunk-7VATBPOI.js";import{$a as F,Bb as a,C as P,Cb as c,Db as h,Eb as S,Fb as w,Hb as g,Lb as x,Mb as r,Rb as A,Sb as M,Tb as I,Ub as $,Vb as f,Xb as T,_a as l,_b as R,gc as V,ja as E,q as O,qb as _,sb as s,ta as v,ua as u}from"./chunk-RETPHGFO.js";import{a as b}from"./chunk-MON7YFGF.js";function pe(o,d){if(o&1&&(S(0),h(1,"info-card",14),w()),o&2){let n=d.$implicit;l(),s("icon",n.icon)("value",n.value)("valueType",n.valueType)("subtitle",n.subtitle)("color",n.color)("accentColor",n.color)}}function ve(o,d){if(o&1&&(a(0,"section",12),_(1,pe,2,6,"ng-container",13),c()),o&2){let n=r();l(),s("ngForOf",n.infoCards)}}function ue(o,d){if(o&1){let n=g();a(0,"section",2)(1,"div",3)(2,"div",4)(3,"span"),f(4,"Dividend History"),c()(),a(5,"button",15),x("click",function(){v(n);let e=r();return u(e.refreshDividend(e.selectedSymbol,!1))}),a(6,"mat-icon"),f(7,"cloud_sync"),c(),a(8,"span"),f(9,"Refresh Dividend History"),c()()(),a(10,"div",16),h(11,"echarts-vertical-bar-chart",17),a(12,"div",18)(13,"ngx-charts-pie-chart",19),x("select",function(e){v(n);let i=r();return u(i.onSelect(e))})("activate",function(e){v(n);let i=r();return u(i.onActivate(e))})("deactivate",function(e){v(n);let i=r();return u(i.onDeactivate(e))}),c()()()()}if(o&2){let n=r();l(11),s("options",n.echartOptions),l(2),s("scheme","picnic")("results",n.pieChartData)("animations",!0)("explodeSlices",!0)("labels",!0)("legend",!0)("arcWidth",.75)}}function fe(o,d){if(o&1&&(a(0,"div",22),h(1,"ngx-charts-area-chart",23),c()),o&2){let n=r(2);l(),s("scheme",n.dividendChartColorScheme)("results",n.dividendLineChartData)("xAxisLabel",n.selectedSymbolLabel)("yAxisLabel","Dividend Rate")("showXAxisLabel",!0)("showYAxisLabel",!0)("xAxis",!0)("yAxis",!0)("autoScale",!0)("animations",!0)("gradient",!0)("yScaleMin",0)}}function he(o,d){if(o&1){let n=g();a(0,"section",2)(1,"div",3)(2,"div",4)(3,"span"),f(4,"Dividend History"),c()(),a(5,"button",15),x("click",function(){v(n);let e=r();return u(e.refreshDividend(e.selectedSymbol,!1))}),a(6,"mat-icon"),f(7,"cloud_sync"),c(),a(8,"span"),f(9,"Refresh Dividend History"),c()()(),a(10,"div",3),_(11,fe,2,12,"div",20),a(12,"div",18)(13,"ngx-charts-pie-chart",21),x("select",function(e){v(n);let i=r();return u(i.onSelect(e))})("activate",function(e){v(n);let i=r();return u(i.onActivate(e))})("deactivate",function(e){v(n);let i=r();return u(i.onDeactivate(e))}),c()()()()}if(o&2){let n=r();l(11),s("ngIf",n.dividendLineChartData),l(2),s("scheme","picnic")("results",n.pieChartData)("animations",!0)("explodeSlices",!0)("labels",!0)("legend",!0)("legendTitle","Tickers")("arcWidth",.75)}}function _e(o,d){if(o&1&&(a(0,"th",27),f(1),c()),o&2){let n=r().index,t=r();l(),T(" ",t.headers[n]," ")}}function xe(o,d){if(o&1&&(a(0,"div",30),h(1,"stock-name-card",31),c()),o&2){let n=r().$implicit;l(),s("stock",n)}}function De(o,d){if(o&1){let n=g();a(0,"span",32),x("click",function(){v(n);let e=r().$implicit,i=r(2);return u(i.refreshDividend(e.symbol,!0))}),f(1),c()}if(o&2){let n=r().$implicit,t=r().index,e=r();l(),T(" ",e.cells[t](n)," ")}}function ge(o,d){if(o&1&&(a(0,"td",28),_(1,xe,2,1,"div",29)(2,De,2,1,"ng-template",null,0,V),c()),o&2){let n=$(3),t=r().index;l(),s("ngIf",t===0)("ngIfElse",n)}}function Ce(o,d){if(o&1&&(S(0,24),_(1,_e,2,1,"th",25)(2,ge,4,2,"td",26),w()),o&2){let n=d.$implicit;s("matColumnDef",n)}}function ye(o,d){o&1&&h(0,"tr",33)}function be(o,d){o&1&&h(0,"tr",34)}var Qe=(()=>{let d=class d{constructor(t){this.dataService=t,this.monthStrings=["January","February","March","April","May","June","July","August","September","October","November","December"],this.browser="",this.dividendIncome=0,this.portfolioYieldOnCost=0,this.selectedSymbol="O",this.selectedSymbolLabel="",this.infoCards=[],this.dividendLineChartData=[],this.dividendChartColorScheme={domain:["teal"]},this.currentMonth=new Date().getMonth(),this.dividendIncomeChartData=Array.from({length:12},(e,i)=>({name:i,series:[]})),this.pieChartData=[],this.echartUpdateOptions={yAxis:{},xAxis:{data:[]},series:[{data:[]}]},this.dataSource=new ie,this.headers=["Symbol","Dividend Income","Yield on Cost","Dividend Rate","Dividend Rate (TTM)","Dividend Yield","Dividend Yield (TTM)","5Y Avg. Yield","Payout Ratio","FCF Payout Ratio","Last Dividend Paid","Ex-dividend Date","Dividend Date"],this.columnDefs=["symbol","dividendIncome","yieldOnCost","dividendRate","trailingAnnualDividendRate","dividendYield","trailingAnnualDividendYield","fiveYearAvgDividendYield","payoutRatio","fcfPayoutRatio","lastDividendValue","exDividendDate","dividendDate"],this.cells=[e=>"",e=>`$${e.dividendIncome.toFixed(2)}`,e=>`${(e.yieldOnCost*100).toFixed(2)}%`,e=>`$${e.dividendRate?.toFixed(2)}`,e=>`$${e.trailingAnnualDividendRate?.toFixed(2)||0}`,e=>`${(e.dividendYield*100||0).toFixed(2)}%`,e=>`${(e.trailingAnnualDividendYield*100||0).toFixed(2)}%`,e=>`${(e.fiveYearAvgDividendYield||0).toFixed(2)}%`,e=>`${(e.payoutRatio*100||0).toFixed(2)}%`,e=>e.quoteType==="EQUITY"&&e.fcfPayoutRatio!==0?`${(e.fcfPayoutRatio*100).toFixed(2)}%`:"N/A",e=>`$${e.lastDividendValue?.toFixed(2)||0}`,e=>e.calendarEvents?.exDividendDate?new Date(e.calendarEvents.exDividendDate).toDateString():"N/A",e=>e.calendarEvents?.dividendDate?new Date(e.calendarEvents.dividendDate).toDateString():"N/A"]}ngOnInit(){this.portfolioHoldings=this.dataService.portfolioHoldings,this.portfolioData=this.dataService.portfolioData,this.dataSource.data=Object.values(this.portfolioData).filter(t=>t.dividendYield>0).map(t=>b(b({},this.portfolioHoldings[t.symbol]),t)),this.dataSource.data.forEach(t=>{if(this.pieChartData.push({name:t.symbol,value:t.dividendIncome}),t.calendarEvents?.dividendDate){let e=t.calendarEvents,m=new Date(e.dividendDate).getMonth();if(m>=new Date().getMonth()){let D=(t.lastDividendValue*t.sharesOwned).toFixed(2);this.dividendIncomeChartData[m].series.push({name:`${t.symbol} | ${t.shortName}`,value:parseFloat(D)})}}}),this.dividendIncomeChartData.forEach((t,e)=>t.name=this.monthStrings[e]),this.dividendIncomeChartData=this.dividendIncomeChartData.filter(t=>t.series.length>0),this.dividendIncome=this.portfolioHoldings.portfolioDividendIncome,this.portfolioYieldOnCost=this.portfolioHoldings.portfolioYieldOnCost,this.browser=this.getBrowserName(),this.setInfoCards(),this.refreshDividend(this.selectedSymbol,!0)}ngAfterViewInit(){this.dataSource.sort=this.sort}getBrowserName(){let t=window?.navigator.userAgent.toLowerCase();return t.indexOf("edge")>-1?"Microsoft Edge":t.indexOf("edg")>-1?"Chromium-based Edge":t.indexOf("opr")>-1?"Opera":t.indexOf("chrome")>-1?"Chrome":t.indexOf("trident")>-1?"Internet Explorer":t.indexOf("firefox")>-1?"Firefox":t.indexOf("safari")>-1?"Safari":"other"}setInfoCards(){this.infoCards=[{icon:"payments",value:this.dividendIncome.toFixed(4),valueType:"currency",subtitle:"Projected Annual Income",color:null},{icon:"payments",value:(this.dividendIncome/4).toFixed(4),valueType:"currency",subtitle:"Average Quarterly Income",color:null},{icon:"payments",value:(this.dividendIncome/12).toFixed(4),valueType:"currency",subtitle:"Average Monthly Income",color:"teal"},{icon:"payments",value:(this.dividendIncome/365).toFixed(4),valueType:"currency",subtitle:"Average Daily Income",color:null},{icon:"payments",value:(this.dividendIncome/8765.81).toFixed(4),valueType:"currency",subtitle:"Average Hourly Income",color:null},{icon:"payments",value:(this.dividendIncome/525948.766).toFixed(4),valueType:"currency",subtitle:"Average Income Per Minute",color:null},{icon:"percent",value:this.portfolioYieldOnCost.toFixed(4),valueType:"percentage",subtitle:"Portfolio YOC",color:"teal"}]}updateChart(t,e){let i={title:{text:""},legend:{data:["Dividend $"]},tooltip:{},xAxis:{data:[],splitLine:{show:!1}},yAxis:{},series:[{name:"Dividend $",type:"bar",data:[],emphasis:{focus:"series"},animationDelay:function(p){return p*10}}],animationEasing:"elasticOut",animationDelayUpdate:function(p){return p*5}},m=this.dataSource.data.filter(p=>p.symbol===t)[0],D={name:`${m.symbol} | ${m.shortName}`,series:[]};Object.entries(e).forEach(p=>{D.series.push({name:new Date(p[0].split("-").join(" ")),value:+p[1]}),i.xAxis.data.push(p[0].split("-").join(" ")),i.series[0].data.push(+p[1])}),this.echartOptions=i,this.dividendLineChartData=[D],this.selectedSymbol=m.symbol,this.selectedSymbolLabel=`
      ${m.symbol} | 
      ${m.longName} | 
      ${m.profile?.sector||"ETF"} |
      ${m.profile?.industry||"ETF"}
    `,window.scroll({top:400,left:0,behavior:"smooth"})}refreshDividend(t,e){this.dataService.getDividendHistory(t,10,e).pipe(O(i=>{if(i.status===500)throw`Api Error: ${t} - ${i.status} - ${i.message}`;return i}),P(i=>(console.log(i),this.dataService.getDividendHistory(t,10,!1)))).subscribe(i=>{this.updateChart(t,i)})}onSelect(t){let e=t.name||t;this.refreshDividend(e,!0)}onActivate(t){console.log("Activate",JSON.parse(JSON.stringify(t)))}onDeactivate(t){console.log("Deactivate",JSON.parse(JSON.stringify(t)))}};d.\u0275fac=function(e){return new(e||d)(F(j))},d.\u0275cmp=E({type:d,selectors:[["portfolio-dividend"]],viewQuery:function(e,i){if(e&1&&(A(C,5),A(y,5)),e&2){let m;M(m=I())&&(i.table=m.first),M(m=I())&&(i.sort=m.first)}},standalone:!0,features:[R],decls:16,vars:18,consts:[["elseBlock",""],["class","dividend-cards-container",4,"ngIf"],[1,"add-border"],[1,"add-flex"],[1,"title"],[1,"chart-container","dividend-income"],[3,"scheme","results","animations","xAxis","yAxis","showXAxisLabel","showYAxisLabel","yAxisLabel","noBarWhenZero","showDataLabel"],["class","add-border",4,"ngIf"],["mat-table","","matSort","","matSortActive","yieldOnCost","matSortDirection","desc",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"dividend-cards-container"],[4,"ngFor","ngForOf"],[3,"icon","value","valueType","subtitle","color","accentColor"],["mat-button","","color","primary",1,"refresh-button",3,"click"],[1,"safari-charts-container"],[3,"options"],[1,"chart-container","dividend-pie"],[3,"select","activate","deactivate","scheme","results","animations","explodeSlices","labels","legend","arcWidth"],["class","chart-container dividend-chart",4,"ngIf"],[3,"select","activate","deactivate","scheme","results","animations","explodeSlices","labels","legend","legendTitle","arcWidth"],[1,"chart-container","dividend-chart"],[3,"scheme","results","xAxisLabel","yAxisLabel","showXAxisLabel","showYAxisLabel","xAxis","yAxis","autoScale","animations","gradient","yScaleMin"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","table-col-0",4,"ngIf","ngIfElse"],[1,"table-col-0"],[3,"stock"],[3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,i){e&1&&(_(0,ve,2,1,"section",1),h(1,"mat-divider"),a(2,"section",2)(3,"div",3)(4,"div",4)(5,"span"),f(6,"Dividend Income"),c()()(),a(7,"div",3)(8,"div",5),h(9,"ngx-charts-bar-vertical-stacked",6),c()()(),_(10,ue,14,8,"section",7)(11,he,14,9,"section",7),a(12,"table",8),_(13,Ce,3,1,"ng-container",9)(14,ye,1,0,"tr",10)(15,be,1,0,"tr",11),c()),e&2&&(s("ngIf",i.infoCards),l(9),s("scheme","natural")("results",i.dividendIncomeChartData)("animations",!0)("xAxis",!0)("yAxis",!0)("showXAxisLabel",!0)("showYAxisLabel",!0)("yAxisLabel","Upcoming Dividend Income $")("noBarWhenZero",!0)("showDataLabel",!0),l(),s("ngIf",i.browser==="Safari"),l(),s("ngIf",i.browser!=="Safari"),l(),s("dataSource",i.dataSource),l(),s("ngForOf",i.columnDefs),l(),s("matHeaderRowDef",i.columnDefs)("matHeaderRowDefSticky",!0),l(),s("matRowDefColumns",i.columnDefs))},dependencies:[ce,de,J,Q,N,H,B,k,se,y,le,te,C,U,z,X,W,G,q,Z,K,ee,L,Y,re,ne,oe,ae,me],styles:["echarts-vertical-bar-chart[_ngcontent-%COMP%]{width:100%}.dividend-cards-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;margin-top:1rem;margin-bottom:1rem}.safari-charts-container[_ngcontent-%COMP%]{display:flex;align-items:center}.table-col-0[_ngcontent-%COMP%]{display:flex;align-items:center;align-content:center;margin:0;padding:0}td.mat-mdc-cell[_ngcontent-%COMP%]:first-of-type   td.mat-mdc-footer-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}.mdc-data-table__header-cell[_ngcontent-%COMP%], .mdc-data-table__cell[_ngcontent-%COMP%]{padding:0}.refresh-button[_ngcontent-%COMP%]{margin-right:1rem}.dividend-income[_ngcontent-%COMP%]{max-width:10%}.dividend-chart[_ngcontent-%COMP%]{width:60%}.dividend-pie[_ngcontent-%COMP%]{width:40%}"]});let o=d;return o})();export{Qe as a};
